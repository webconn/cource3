\section{Предложения по рефакторингу}

Актуальная версия Opermon имеет довольно сложный граф зависимостей от дополнительных компонентов. Несмотря на это, существующая архитектура решения остаётся недостаточно гибкой и не предоставляет возможностей по удобному разделению на компоненты.

Предложения по рефакторингу, приведённые в этой работе, нацелены на:

\begin{enumerate}
 \item \textbf{Более явное выделение интерфейсо-специфичной части}. Возвращаясь к пунктам \ref{server_implementation} и \ref{client_implementation}, можно заметить, что актуальная версия решения имеет местами не очень очевидное разделение на файлы по компонентам. Также существуют общие процедуры, зависящие сразу от всех поддерживаемых интерфейсов, из-за чего возможно появление ошибок работы старых интерфейсов при добавлении новых.
 \item \textbf{Возможность вариативной сборки}. В рамках Opermon реализована поддержка различных интерфейсов, при этом часть кода не предназначена для распространения. Необходимо явно разделить реализации поддержки различных интерфейсов и добавить возможность сборки только необходимых для конкретного заказчика компонентов. Более того, после этого может появиться возможность свободно распространять ядро Opermon, что повлияет на популярность решений лаборатории в сообществе.
 \item \textbf{Разбиение кода и собираемых компонентов на независимые модули}. Этот шаг позволит облегчить тестирование отдельных компонентов системы. Более того, использование системы подключаемых бинарных компонентов (плагинов) упростит распространение и поддержку Opermon для разных категорий пользователей, а также разработку дополнительных модулей для Opermon сторонними разработчиками.
\end{enumerate}

\subsection {Разбиение компонента sma}

В актуальной версии решения реализация интерфейсо-зависимой части анализатора вынесена в подключаемый модуль sma. Тем не менее, этот модуль включает в себя реализацию сразу всех поддерживаемых в Opermon интерфейсов. Исходя из целей рефакторинга, есть смысл перенести реализацию каждого из интерфейсов в отдельные динамически подключаемые модули. Для подгрузки модулей можно использовать, например, средство QLibrary [\ref{qlibrary}], встроенное в фреймворк Qt. Динамическая подгрузка позволит переконфигурировать решение Opermon без необходимости повторной сборки, что также облегчит распространение модулей, созданных сторонними разработчиками.

